# Ensure Steam autostarts in KDE
mkdir -p "$HOME/.config/autostart"
cat > "$HOME/.config/autostart/steam.desktop" <<EOF
[Desktop Entry]
Type=Application
Exec=steam
Hidden=false
NoDisplay=false
X-GNOME-Autostart-enabled=true
Name=Steam
Comment=Start Steam client
EOF
#!/bin/bash

# Start Sunshine (GameStream server) in the background.
if command -v sunshine >/dev/null 2>&1; then
  if ! pgrep -x sunshine >/dev/null 2>&1; then
    sunshine >/config/sunshine.log 2>&1 &
  fi
fi

# Optional: launch a simple GUI window to prove capture/streaming works.
if command -v selkies-smoke-test >/dev/null 2>&1; then
  selkies-smoke-test
fi

# Launch KDE Plasma (X11 session)
if command -v startplasma-x11 >/dev/null 2>&1; then
  startplasma-x11
else
  echo "KDE Plasma (startplasma-x11) not found!"
fi
